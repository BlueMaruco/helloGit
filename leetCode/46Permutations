public class Solution {
    public List<List<Integer>> permute(int[] array){
	    if(array==null||array.length == 0) return null;
        int len = array.length;
	    List<List<Integer>> permutations = new ArrayList<>();
	    LinkedList<Integer> permutation = new LinkedList<>();
	    boolean[] flag = new boolean[len];
	    generate(permutations,array,0,permutation,flag);	
	    return permutations;

    }
    public void generate(List<List<Integer>> permutations,int[] array,int index,LinkedList<Integer> permutation,boolean[] flag){
	    if(index==array.length){
            List<Integer> tmp = new LinkedList<>(permutation);
            permutations.add(tmp);
            return;
        }
	    for(int i = 0;i<array.length;i++){
	
            while(flag[i]){ 
               i++;
               if(i>=array.length) return;
            }
            permutation.add(array[i]);
            flag[i] = true;
	        generate(permutations,array,index+1,permutation,flag);
	        permutation.removeLast();
	        flag[i] = false;
     }   
	

    }


}
